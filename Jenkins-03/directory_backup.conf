#!/bin/bash

CONFIG_FILE="$HOME/company-backup-system/config/backup.conf"
if [ -f "$CONFIG_FILE" ]; then
    source "$CONFIG_FILE"
else
    echo "$(date) - ERROR: Configuration file $CONFIG_FILE not found" >> "$HOME/company-backup-system/logs/backup.log"
    exit 1
fi

if [ -z "$BACKUP_SOURCES" ] || [ -z "$BACKUP_DEST" ] || [ -z "$RETENTION_DAYS" ]; then
    echo "$(date) - ERROR: Invalid configuration in $CONFIG_FILE" >> "$HOME/company-backup-system/logs/backup.log"
    exit 1
fi

mkdir -p "$BACKUP_DEST"

TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="${BACKUP_DEST}/backup_${TIMESTAMP}.tar.gz"
